(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{119:function(e,t,a){},120:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),o=a.n(l),i=a(16),c=a(162),s=a(161),u=a(163),m=a(165),d=a(24),p=a.n(d),g=p.a.initializeApp({apiKey:"AIzaSyCqlMUtnbP4zqJ26Izex4TJ1h6j0aWgiKc",authDomain:"tree-38cba.firebaseapp.com",databaseURL:"https://tree-38cba.firebaseio.com",projectId:"tree-38cba",storageBucket:"tree-38cba.appspot.com",messagingSenderId:"599594846214",appId:"1:599594846214:web:52a656efb48940ad7fdb87",measurementId:"G-PMMHZGH8TL"}).firestore(),h=p.a.auth(),E=p.a.storage(),f=a(10),b=a(167),v=a(41),y=Object(c.a)((function(e){return{root:{width:"80%"}}}));var w=function(e){var t=y();return r.a.createElement("div",{style:{backgroundColor:"#FAEBD7",border:"4px solid brown",paddingLeft:"10px",paddingRight:"10px"}},r.a.createElement(s.a,{variant:"h2",color:"secondary"}," Sign Up: "),r.a.createElement(f.c,{initialValues:{displayName:"",email:"",password:"",confPassword:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.displayName?e.displayName.length>15&&(t.displayName="Display name cannot be longer than 15 characters"):t.displayName="Required",e.password?e.password.length<6&&(t.password="Password must be at least 6 characters long"):t.password="Required",e.confPassword?e.password!==e.confPassword&&(t.confPassword="Passwords must match"):t.confPassword="Required",t},onSubmit:function(t,a){var n=a.setSubmitting;setTimeout((function(){var a;a=t,console.log(a),h.createUserWithEmailAndPassword(a.email,a.password).then((function(e){return g.collection("profiles").add({username:a.displayName,imageUrl:null,uid:e.user.uid,bio:null,acorns:0}),e.user.updateProfile({displayName:a.displayName})})).catch((function(e){return alert(e.message)})),e.setPage("home"),n(!1)}),400)}},(function(e){e.values,e.errors,e.touched,e.handleChange;var a=e.handleSubmit,n=e.isSubmitting;return r.a.createElement(f.b,{onSubmit:a,autoComplete:"off"},r.a.createElement(b.a,{margin:3},r.a.createElement(f.a,{component:v.a,className:t.root,type:"text",label:"Display Name",name:"displayName"})),r.a.createElement(b.a,{margin:3},r.a.createElement(f.a,{component:v.a,className:t.root,type:"email",label:"Email",name:"email"})),r.a.createElement(b.a,{margin:3},r.a.createElement(f.a,{component:v.a,className:t.root,type:"password",label:"Password",name:"password"})),r.a.createElement(b.a,{margin:3},r.a.createElement(f.a,{component:v.a,className:t.root,type:"password",label:"Confirm Password",name:"confPassword"})),r.a.createElement(u.a,{type:"submit",color:"secondary",variant:"outlined",disabled:n}," Submit "),r.a.createElement("br",null),r.a.createElement("br",null))})))},k=Object(c.a)((function(e){return{root:{width:"80%"}}}));var S=function(e){var t=k();return r.a.createElement("div",{style:{backgroundColor:"#FAEBD7",border:"4px solid brown",paddingLeft:"10px",paddingRight:"10px"}},r.a.createElement(s.a,{variant:"h2",color:"secondary"}," Log In: "),r.a.createElement(f.c,{initialValues:{email:"",password:""},validate:function(e){var t={};if(e.email||(t.email="Required"),!e.password)return t.password="Required",t},onSubmit:function(t,a){var n=a.setSubmitting;setTimeout((function(){var a;a=t,h.signInWithEmailAndPassword(a.email,a.password).catch((function(e){return alert(e.message)})),e.setPage("home"),n(!1)}),400)}},(function(e){e.values;var a=e.errors,n=e.touched,l=(e.handleChange,e.handleSubmit),o=e.isSubmitting;return r.a.createElement(f.b,{onSubmit:l},r.a.createElement("br",null),r.a.createElement(b.a,{margin:5},r.a.createElement(f.a,{component:v.a,className:t.root,type:"email",label:"Email",name:"email"})),a.email&&n.email,r.a.createElement("br",null),r.a.createElement(b.a,{margin:5},r.a.createElement(f.a,{component:v.a,className:t.root,type:"password",label:"Password",name:"password"})),r.a.createElement("br",null),a.password&&n.password,r.a.createElement(u.a,{type:"submit",color:"secondary",variant:"outlined",disabled:o}," Submit "),r.a.createElement("br",null),r.a.createElement("br",null))})))},C=a(18),N=a(19),O=a(28),I=a(21),j=a(20),T=a(67),P=Object(c.a)((function(e){return{button:{width:5,height:20}}}));var B=function(e){var t,a=P();return e.tree.owner===e.uid?(t={color:"white",backgroundColor:"blue",textAlign:"center"},r.a.createElement("div",null,r.a.createElement("img",{src:e.tree.imageUrl,alt:"",width:"62"}),r.a.createElement(u.a,{variant:"outlined",className:a.button,style:t,onClick:function(){return e.function(e.tree)}}," Owner  "))):e.tree.owner?(t={color:"white",backgroundColor:"green",textAlign:"center"},r.a.createElement("div",null,r.a.createElement("img",{src:e.tree.imageUrl,alt:"",width:"62"}),r.a.createElement(u.a,{variant:"outlined",size:"small",className:a.button,style:t,onClick:function(){return e.function(e.tree)}}," Owned "))):(t={color:"brown",backgroundColor:"yellow",textAlign:"center"},r.a.createElement("div",null,r.a.createElement("img",{src:e.tree.imageUrl,alt:"",width:"62"}),r.a.createElement(u.a,{variant:"outlined",className:a.button,style:t,onClick:function(){return e.function(e.tree)}}," Orphan ")))},x=a(68),U=a(121),D=a(164),A=a(158),L=Object(c.a)((function(e){return{error:{margin:e.spacing(3),color:"red"},image:{margin:e.spacing(3),width:"30ch"},description:{margin:e.spacing(3),width:"80%"},post:{backgroundColor:"#FAEBD7",paddingLeft:"2ch",paddingRight:"2ch",border:"4px solid brown"}}}));var F=function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2),l=a[0],o=a[1],c=L();return r.a.createElement("div",{className:c.post},r.a.createElement(f.c,{initialValues:{description:"",image:null},validate:function(e){var t={};return e.image||(t.image="Upload an image of your tree to post"),t},onSubmit:function(t,a){var n=a.setSubmitting,r=a.resetForm;setTimeout((function(){var a;a=t,console.log(a),E.ref("images/"+a.image.name+"-"+e.uid).put(a.image).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);o(t)}),(function(e){alert(e.message)}),(function(){E.ref("images").child(a.image.name+"-"+e.uid).getDownloadURL().then((function(t){g.collection("publicTrees").where("psudeoId","==",e.treeId).get().then((function(n){n.forEach((function(n){console.log(n.id," => ",n.data()),g.collection("publicTrees").doc(n.id).update({imageUrl:t}).then(g.collection("publicTrees").doc(n.id).collection("posts").add({psudeoId:Math.random().toString(36),postedBy:e.username,postedbyId:e.uid,timestamp:p.a.firestore.FieldValue.serverTimestamp(),imageUrl:t,description:a.description}))}))}))}))})),n(!1),r({})}),400)}},(function(e){e.values;var t=e.errors,a=(e.touched,e.handleChange),n=e.handleSubmit,o=e.isSubmitting,i=e.setFieldValue;return r.a.createElement(f.b,{onSubmit:n,autoComplete:"off",className:c.root},r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement(s.a,{align:"center",variant:"h3",color:"secondary"}," Post on Tree "),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Picture of Tree: "),r.a.createElement(U.a,{className:c.image,id:"image",name:"image",type:"file",onChange:function(e){i("image",e.target.files[0])}}),r.a.createElement(D.a,{variant:"static",value:l})),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Enter a Description: "),r.a.createElement(A.a,{label:"Description",name:"description",multiline:!0,className:c.description,rows:8,variant:"outlined",onChange:a}),r.a.createElement(s.a,{className:c.error}," ",t.image," "),r.a.createElement("br",null),r.a.createElement(u.a,{type:"submit",color:"secondary",variant:"outlined",disabled:o}," Submit "),r.a.createElement("br",null),r.a.createElement("br",null))})))},M=function(e){Object(I.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).state={comments:[]},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.collection("publicTrees").doc(this.props.treeId).collection("posts").doc(this.props.postId).collection("comments").orderBy("timestamp","desc").get().then((function(t){var a=[];t.forEach((function(e){a.push(e.data())})),e.setState({comments:a})}))}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;this.state!==t&&g.collection("publicTrees").doc(this.props.treeId).collection("posts").doc(this.props.postId).collection("comments").orderBy("timestamp","desc").get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),n.setState({comments:t})}))}},{key:"render",value:function(){var e={border:"1px solid blue"},t=this.state.comments;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{src:this.props.post.imageUrl,alt:"",width:"100%"}),r.a.createElement(s.a,{variant:"h4",color:"secondary"}," ",this.props.post.description," "),r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Posted By: ",this.props.post.postedBy," "),this.props.post.timestamp?r.a.createElement(s.a,{align:"right",variant:"h5",color:"secondary"}," ",this.props.post.timestamp.toDate().toLocaleDateString()+" @ "+this.props.post.timestamp.toDate().toLocaleTimeString()," "):r.a.createElement(s.a,{align:"right",variant:"h5",color:"secondary"},' "@ Right Now" ')),r.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px",backgroundColor:"#87CEFA",border:"4px solid blue"}},t.length>0?t.map((function(a){var n="",l="";return a.timestamp&&(n=a.timestamp.toDate().toLocaleDateString(),l=a.timestamp.toDate().toLocaleTimeString()),a.imageUrl?r.a.createElement("div",{key:a.psudeoId},t[0].psudeoId===a.psudeoId?null:r.a.createElement("hr",{style:e}),r.a.createElement(s.a,{variant:"h6",color:"secondary"}," ",r.a.createElement("b",null,a.postedBy,":")," ",a.comment," "),r.a.createElement("img",{src:a.imageUrl,alt:"",width:"50%"}),r.a.createElement(s.a,{align:"right",variant:"h6",color:"secondary"}," ",n+" @ "+l," ")):r.a.createElement("div",{key:a.psudeoId},t[0].psudeoId===a.psudeoId?null:r.a.createElement("hr",{style:e}),r.a.createElement(s.a,{variant:"h6",color:"secondary"}," ",r.a.createElement("b",null,a.postedBy,":")," ",a.comment," "),r.a.createElement(s.a,{align:"right",variant:"h6",color:"secondary"}," ",n+" @ "+l," "))})):r.a.createElement(s.a,{variant:"h5",color:"secondary",align:"center"}," No comments ")))}}]),a}(r.a.Component),R=Object(c.a)((function(e){return{root:{margin:e.spacing(1)},error:{margin:e.spacing(3),color:"red"},image:{margin:e.spacing(3),width:"35ch"},comment:{margin:e.spacing(3),width:"80%"}}}));var V=function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2),l=a[0],o=a[1],c=R();return r.a.createElement("div",null,r.a.createElement(f.c,{initialValues:{comment:"",image:null},validate:function(e){var t={};return e.image||e.comment||(t.image="Upload at least an image or a comment"),t},onSubmit:function(t,a){var n=a.setSubmitting,r=a.resetForm;setTimeout((function(){var a;(a=t).image?E.ref("images/"+a.image.name+"-"+e.uid).put(a.image).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);o(t)}),(function(e){alert(e.message)}),(function(){E.ref("images").child(a.image.name+"-"+e.uid).getDownloadURL().then((function(t){g.collection("publicTrees").doc(e.treeId).collection("posts").doc(e.postId).collection("comments").add({imageUrl:t,timestamp:p.a.firestore.FieldValue.serverTimestamp(),postedBy:e.username,postedById:e.uid,comment:a.comment,psudeoId:Math.random().toString(36)})}))})):g.collection("publicTrees").doc(e.treeId).collection("posts").doc(e.postId).collection("comments").add({imageUrl:null,timestamp:p.a.firestore.FieldValue.serverTimestamp(),postedBy:e.username,postedById:e.uid,comment:a.comment,psudeoId:Math.random().toString(36)}),n(!1),r({})}),400)}},(function(e){e.values;var t=e.errors,a=(e.touched,e.handleChange),n=e.handleSubmit,o=e.isSubmitting,i=e.setFieldValue;return r.a.createElement(f.b,{onSubmit:n,autoComplete:"off",className:c.root},r.a.createElement(s.a,{variant:"h4",color:"secondary"}," Comment: "),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Enter a comment: "),r.a.createElement(A.a,{label:"Comment",name:"comment",multiline:!0,className:c.comment,rows:3,variant:"outlined",onChange:a}),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Add a Picture: "),r.a.createElement(U.a,{className:c.image,id:"image",name:"image",type:"file",onChange:function(e){i("image",e.target.files[0])}}),r.a.createElement(D.a,{variant:"static",value:l})),r.a.createElement(s.a,{className:c.error}," ",t.image," "),r.a.createElement(u.a,{type:"submit",color:"secondary",variant:"outlined",disabled:o}," Comment "))})))},W=!1,q=function(e){Object(I.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).state={posts:null,postIds:null},e.handleChange=e.handleChange.bind(Object(O.a)(e)),e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this;W=!0,g.collection("publicTrees").doc(this.props.treeId).collection("posts").orderBy("timestamp","desc").get().then((function(t){var a=[],n=[];t.forEach((function(e){a.push(e.data()),n.push(e.id)})),W&&e.setState({posts:a,postIds:n})}))}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;this.state!==t&&g.collection("publicTrees").doc(this.props.treeId).collection("posts").orderBy("timestamp","desc").get().then((function(e){var t=[],a=[];e.forEach((function(e){t.push(e.data()),a.push(e.id)})),n.setState({posts:t,postIds:a})}))}},{key:"componentWillUnmount",value:function(){W=!1}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(x.a)({},a,n))}},{key:"render",value:function(){var e=this,t={border:"2px dotted brown"};if(this.state.posts){var a=this.state.posts;return r.a.createElement("div",{style:{backgroundColor:"#90EE90"}},r.a.createElement("div",null,this.props.uid===this.props.tree.owner&&this.props.main?r.a.createElement(F,{postUpdate:this.postUpdate,username:this.props.username,treeId:this.props.tree.psudeoId,uid:this.props.uid}):null),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(s.a,{variant:"h3",color:"secondary",align:"center"}," Posts "),r.a.createElement("hr",null),a.length>0?a.map((function(a,n){return r.a.createElement("div",{key:a.psudeoId},r.a.createElement(M,{post:a,treeId:e.props.treeId,postId:e.state.postIds[n]}),r.a.createElement(V,{uid:e.props.uid,username:e.props.username,post:a,treeId:e.props.treeId,postId:e.state.postIds[n]}),r.a.createElement("hr",{style:t}))})):r.a.createElement(s.a,{variant:"h4",color:"secondary"}," No Posts on Tree ")))}return r.a.createElement("div",null,r.a.createElement(s.a,{variant:"h4",color:"secondary"}," Loading... "))}}]),a}(r.a.Component),z=Object(c.a)((function(e){return{root:{margin:e.spacing(1),width:"75ch"}}}));var _=function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2),l=a[0],o=a[1],c=z();return r.a.createElement("div",null,r.a.createElement(s.a,{variant:"h2",color:"secondary"}," Edit Profile: "),r.a.createElement(f.c,{initialValues:{bio:e.bio,image:null},validate:function(e){return{}},onSubmit:function(t,a){var n=a.setSubmitting;setTimeout((function(){var a;(a=t).image?E.ref("images/"+a.image.name+"-"+e.uid).put(a.image).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);o(t)}),(function(e){alert(e.message)}),(function(){E.ref("images").child(a.image.name+"-"+e.uid).getDownloadURL().then((function(t){g.collection("profiles").where("uid","==",e.uid).get().then((function(e){e.forEach((function(e){g.collection("profiles").doc(e.id).update({imageUrl:t,bio:a.bio})}))})).catch((function(e){console.log("Error getting documents: ",e)}))}))})):g.collection("profiles").where("uid","==",e.uid).get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data()),g.collection("profiles").doc(e.id).update({bio:a.bio})}))})).catch((function(e){console.log("Error getting documents: ",e)})),n(!1)}),400)}},(function(t){t.values,t.errors,t.touched;var a=t.handleChange,n=t.handleSubmit,o=t.isSubmitting,i=t.setFieldValue;return r.a.createElement(f.b,{onSubmit:n,className:c.root,noValidate:!0,autoComplete:"off"},r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Biography: "),r.a.createElement(A.a,{label:"Biography",name:"bio",defaultValue:e.bio,multiline:!0,className:c.root,rows:8,variant:"outlined",onChange:a}),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Profile Picture: "),r.a.createElement(U.a,{id:"image",name:"image",type:"file",onChange:function(e){i("image",e.target.files[0])}}),r.a.createElement(D.a,{variant:"static",value:l}),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(u.a,{type:"submit",color:"secondary",variant:"outlined",disabled:o}," Submit "))})))},J=function(e){Object(I.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).state={myTrees:[]},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.collection("publicTrees").where("owner","==",this.props.uid).get().then((function(t){var a=[];t.forEach((function(e){a.push(e.data())})),e.setState({myTrees:a})})).catch((function(e){console.log("Error getting documents: ",e)}))}},{key:"render",value:function(){var e=this,t=this.state.myTrees;return r.a.createElement("div",null,t.length>0?t.map((function(t){return r.a.createElement("div",{key:t.psudeoId},r.a.createElement(X,{uid:e.props.uid,key:t.psudeoId,username:e.props.username,psudeoId:t.psudeoId,main:e.props.main}),",",r.a.createElement("hr",null))})):r.a.createElement(s.a,{variant:"h5",color:"secondary"}," No Trees "))}}]),a}(r.a.Component),K=a(83),Z=a.n(K),G=!1,Y=function(e){Object(I.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).state={profile:null,editing:!1},e.setEdit=e.setEdit.bind(Object(O.a)(e)),e.handleChange=e.handleChange.bind(Object(O.a)(e)),e}return Object(N.a)(a,[{key:"setEdit",value:function(){this.setState({editing:!this.state.editing})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(x.a)({},a,n))}},{key:"componentDidMount",value:function(){var e=this;G=!0,g.collection("profiles").where("uid","==",this.props.uid).onSnapshot((function(t){t.forEach((function(t){G&&e.setState({profile:t.data(),editing:!1})}))}))}},{key:"componentWillUnmount",value:function(){G=!1}},{key:"render",value:function(){return this.state.editing?r.a.createElement("div",null,r.a.createElement(_,{bio:this.state.profile.bio,setEdit:this.setEdit,uid:this.props.uid}),r.a.createElement("br",null),r.a.createElement(u.a,{variant:"outlined",color:"secondary",onClick:this.setEdit}," Back to Profile ")):this.state.profile?r.a.createElement("div",{style:{backgroundColor:"#FAEBD7",border:"4px solid brown",paddingLeft:"10px",paddingRight:"10px"}},r.a.createElement(s.a,{variant:"h2",align:"center",color:"secondary"}," ",this.props.username," "),r.a.createElement("hr",null),r.a.createElement(m.a,{container:!0,spacing:4},r.a.createElement(m.a,{item:!0,xs:6},this.state.profile.imageUrl?r.a.createElement("img",{src:this.state.profile.imageUrl,alt:"",width:"100%"}):r.a.createElement("img",{src:Z.a,alt:"",width:"100%"})),r.a.createElement(m.a,{item:!0,xs:6},r.a.createElement(s.a,{variant:"h2",align:"left",color:"secondary"}," Acorns: ",this.state.profile.acorns," "))),r.a.createElement(s.a,{variant:"h5",align:"left",color:"secondary"}," ",this.state.profile.bio," "),r.a.createElement("br",null),this.props.main?r.a.createElement(u.a,{variant:"outlined",color:"secondary",onClick:this.setEdit}," Edit Profile "):null,r.a.createElement("hr",null),r.a.createElement(s.a,{variant:"h2",align:"center",color:"secondary"}," Adopted Trees "),r.a.createElement("hr",null),r.a.createElement(J,{uid:this.props.uid,username:this.props.username,main:this.props.main})):r.a.createElement("div",null,r.a.createElement(s.a,{variant:"h2",align:"left",color:"secondary"}," Loading... "))}}]),a}(r.a.Component),H=a(168),$=function(e){Object(I.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).state={profile:null,fullProfile:!1},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.collection("profiles").where("uid","==",this.props.ownerId).onSnapshot((function(t){var a=null;t.docs.forEach((function(e){a=e.data()})),e.setState({profile:a})}))}},{key:"render",value:function(){var e=this;if(this.state.profile){return r.a.createElement("div",null,r.a.createElement(s.a,{variant:"h5",align:"left",color:"secondary",display:"inline"}," Owner: "),r.a.createElement(u.a,{style:{backgroundColor:"#FAEBD7"},variant:"outlined",startIcon:r.a.createElement(H.a,{src:this.state.profile.imageUrl}),onClick:function(){return e.setState({fullProfile:!e.state.fullProfile})}}," ",this.state.profile.username),this.state.fullProfile?r.a.createElement(Y,{uid:this.props.ownerId,username:this.state.profile.username,main:!1}):null)}return r.a.createElement(s.a,null," Loading... ")}}]),a}(r.a.Component),Q=!1,X=function(e){Object(I.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).updateOwner=function(t){g.collection("publicTrees").where("psudeoId","==",e.props.psudeoId).get().then((function(e){e.forEach((function(e){g.collection("publicTrees").doc(e.id).update({owner:t})}))})).catch((function(e){console.log("Error getting documents: ",e)}))},e.state={fullPage:!1,tree:null,treeId:null},e.updateOwner=e.updateOwner.bind(Object(O.a)(e)),e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this;Q=!0,g.collection("publicTrees").onSnapshot((function(t){var a=null,n=null;t.docs.forEach((function(t){t.data().psudeoId===e.props.psudeoId&&(a=t.data(),n=t.id)})),Q&&e.setState({tree:a,treeId:n})}))}},{key:"componentWillUnmount",value:function(){Q=!1}},{key:"render",value:function(){var e=this;if(this.state.tree){var t=this.state.tree;console.log(this.state.tree.owner);var a="",n="";return t.timestamp&&(a=t.timestamp.toDate().toLocaleDateString(),n=t.timestamp.toDate().toLocaleTimeString()),r.a.createElement("div",{style:{backgroundColor:"#90EE90",textAlign:"left",paddingLeft:"10px",paddingRight:"10px",border:"4px solid brown"}},r.a.createElement(s.a,{variant:"h2",color:"secondary"}," ",t.name," "),t.owner?null:r.a.createElement(u.a,{variant:"outlined",color:"secondary",onClick:function(){return e.updateOwner(e.props.uid)}}," Adopt Tree "),t.owner===this.props.uid&&this.props.main?r.a.createElement(u.a,{variant:"outlined",color:"secondary",onClick:function(){return e.updateOwner(null)}}," Release from Care "):null,r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("img",{src:t.imageUrl,alt:"",width:"100%"})),r.a.createElement("br",null),t.owner&&this.props.main?r.a.createElement($,{ownerId:t.owner}):null,r.a.createElement(s.a,{variant:"h5",color:"secondary",align:"right"}," ",a+" "+n," "),this.state.fullPage?r.a.createElement(u.a,{variant:"outlined",color:"secondary",onClick:function(){return e.setState({fullPage:!1})}}," Close Posts "):r.a.createElement(u.a,{variant:"outlined",color:"secondary",onClick:function(){return e.setState({fullPage:!0})}}," View Posts "),r.a.createElement("br",null),r.a.createElement("br",null),this.state.fullPage?[r.a.createElement(q,{uid:this.props.uid,treeId:this.state.treeId,username:this.props.username,tree:this.state.tree,main:this.props.main}),r.a.createElement(u.a,{variant:"outlined",color:"secondary",onClick:function(){return e.setState({fullPage:!1})}}," Close Posts "),r.a.createElement("br",null),r.a.createElement("br",null)]:null)}return r.a.createElement(s.a,{variant:"h3",color:"secondary"}," Loading... ")}}]),a}(r.a.Component),ee=!0,te=function(e){Object(I.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).state={publicTrees:[],tree:null},e.setTree=e.setTree.bind(Object(O.a)(e)),e}return Object(N.a)(a,[{key:"setTree",value:function(e){this.setState({tree:e})}},{key:"componentDidMount",value:function(){var e=this;ee=!0,g.collection("publicTrees").onSnapshot((function(t){ee&&e.setState({publicTrees:t.docs.map((function(e){return e.data()}))})}))}},{key:"componentWillUnmount",value:function(){ee=!1}},{key:"render",value:function(){var e=this,t=this.state.publicTrees;return this.state.tree?r.a.createElement("div",null,r.a.createElement(X,{uid:this.props.uid,username:this.props.username,psudeoId:this.state.tree.psudeoId,main:!0}),r.a.createElement("br",null),r.a.createElement(u.a,{variant:"outlined",color:"secondary",onClick:function(){return e.setTree(null)}}," Return to Map ")):r.a.createElement("div",null,r.a.createElement("div",{style:{height:"100vh",width:"100%"}},r.a.createElement(T.a,{bootstrapURLKeys:{key:"AIzaSyBiB3iNngJM_kFWKxSv9a30O3fww7YTiWA"},center:{lat:48.0401,lng:-122.4063},zoom:10},t.length>0?t.map((function(t){return r.a.createElement(B,{key:t.psudeoId,uid:e.props.uid,lat:t.latitude,lng:t.longitude,function:e.setTree,tree:t})})):null)))}}]),a}(r.a.Component);var ae=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),l=a[0],o=a[1];return Object(n.useEffect)((function(){var e=new Date,t=e.getMonth(),a=e.getDate(),n=e.getFullYear();o(n+t+a)}),[]),console.log(l),e.loggedIn?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(te,{uid:e.uid,username:e.username})):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{style:{backgroundColor:"#FAEBD7",border:"4px solid brown",paddingLeft:"10px",paddingRight:"10px"}},r.a.createElement(s.a,{variant:"h5",color:"secondary",align:"left"}," Welcome to Community Tree! "),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary",align:"left"}," Our goal is to provide people with a vehicle to adopt and care for public trees in their communities. "),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary",align:"left"}," Take a look around. Upload a tree in your community that needs care. Adopt a tree that you wish to help. "),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary",align:"left"}," Plant a public tree and document its life. "),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary",align:"left"}," Check back often. Make suggestions. We want to make this as user friendly as possible. "),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary",align:"left"}," Login to view the community driven site! "),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary",align:"left"}," Peace, "),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary",align:"left"}," Community Tree ")))},ne=Object(c.a)((function(e){return{confirm:{color:"green"},error:{color:"red"},email:{margin:e.spacing(1),width:"50%"},message:{margin:e.spacing(1),width:"80%"}}}));var re=function(e){var t=ne(),a=Object(n.useState)(""),l=Object(i.a)(a,2),o=l[0],c=l[1];return r.a.createElement("div",{style:{backgroundColor:"#FAEBD7",paddingLeft:"10px",border:"4px solid brown"}},r.a.createElement(s.a,{variant:"h2",color:"secondary"}," Feedback: "),r.a.createElement(f.c,{initialValues:{email:"",message:""},validate:function(e){var t={};return e.message||(t.message="Please enter a message"),c(""),t},onSubmit:function(t,a){var n=a.setSubmitting,r=a.resetForm;setTimeout((function(){var a;a=t,g.collection("feedback").add({timestamp:p.a.firestore.FieldValue.serverTimestamp(),username:e.username,email:a.email,message:a.message}),n(!1),r({}),c("Feedback recieved, thank you.")}),400)}},(function(e){e.values;var a=e.errors,n=e.handleChange,l=e.handleSubmit,i=e.isSubmitting;return r.a.createElement(f.b,{onSubmit:l,autoComplete:"off"},r.a.createElement(b.a,{margin:7},r.a.createElement(A.a,{className:t.message,multiline:!0,rows:4,variant:"outlined",type:"text",label:"Message",name:"message",onChange:n})),r.a.createElement(b.a,{margin:7},r.a.createElement(A.a,{className:t.email,type:"text",label:"Return Email (Optional)",name:"email",onChange:n})),r.a.createElement(s.a,{className:t.error}," ",a.message," "),r.a.createElement(s.a,{className:t.confirm}," ",o," "),r.a.createElement("br",null),r.a.createElement(u.a,{type:"submit",color:"secondary",variant:"outlined",disabled:i}," Send "),r.a.createElement("br",null),r.a.createElement("br",null))})))},le=function(e){Object(I.a)(a,e);var t=Object(j.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{src:this.props.imageUrl,alt:"",height:"50",width:"50"}))}}]),a}(r.a.Component),oe=a(25),ie=a.n(oe),ce=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:ie.a,alt:"",height:"50",width:"50"}))},se=Object(c.a)((function(e){return{confirm:{color:"green"},error:{color:"red"},name:{margin:e.spacing(1),width:"40ch"},description:{margin:e.spacing(1),width:"80%"}}}));var ue=function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)([]),m=Object(i.a)(c,2),d=m[0],h=m[1],v=Object(n.useState)(""),y=Object(i.a)(v,2),w=y[0],k=y[1],S=se();return Object(n.useEffect)((function(){var e=g.collection("publicTrees").onSnapshot((function(e){h(e.docs.map((function(e){return e.data()})))}));return function(){e()}}),[]),r.a.createElement("div",{style:{backgroundColor:"#FAEBD7",border:"4px solid brown",paddingLeft:"10px",paddingRight:"10px"}},r.a.createElement(s.a,{variant:"h2",color:"secondary"}," Upload a Tree: "),r.a.createElement(f.c,{initialValues:{name:"",description:"",lat:0,lng:0,image:null},validate:function(e){var t={};return e.name||(t.name="Tree name required"),e.description||(t.description="Please enter a description for the tree"),e.image||(t.image="Upload an image for your tree"),0===e.lat&&0===e.lng&&(t.lat="Locate your tree on the Google Map above"),k(""),t},onSubmit:function(t,a){var n=a.setSubmitting,r=a.resetForm;setTimeout((function(){var a;a=t,E.ref("images/"+a.image.name+"-"+e.uid).put(a.image).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);o(t)}),(function(e){alert(e.message)}),(function(){var t=Math.random().toString(36);E.ref("images").child(a.image.name+"-"+e.uid).getDownloadURL().then((function(n){g.collection("publicTrees").add({psudeoId:t,timestamp:p.a.firestore.FieldValue.serverTimestamp(),latitude:a.lat,longitude:a.lng,name:a.name,owner:e.uid,imageUrl:n}).then(g.collection("publicTrees").where("psudeoId","==",t).get().then((function(t){t.forEach((function(t){console.log(t.id," => ",t.data()),g.collection("publicTrees").doc(t.id).collection("posts").add({psudeoId:Math.random().toString(36),postedBy:e.username,postedbyId:e.uid,timestamp:p.a.firestore.FieldValue.serverTimestamp(),imageUrl:n,description:a.description})}))})))}))})),n(!1),r({}),k("Tree upload success.")}),400)}},(function(e){var t=e.values,a=e.errors,n=(e.touched,e.handleChange),o=e.handleSubmit,i=e.isSubmitting,c=e.setFieldValue;return r.a.createElement(f.b,{onSubmit:o,autoComplete:"off"},r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Name the Tree: "),r.a.createElement(b.a,{margin:3},r.a.createElement(A.a,{label:"Name",name:"name",className:S.name,onChange:n})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Enter a Description: "),r.a.createElement(b.a,{margin:3},r.a.createElement(A.a,{label:"Description",name:"description",multiline:!0,className:S.description,rows:8,variant:"outlined",onChange:n})),r.a.createElement("div",{style:{height:"100vh",width:"100%"}},r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Locate: "),r.a.createElement("br",null),r.a.createElement(T.a,{bootstrapURLKeys:{key:"AIzaSyBiB3iNngJM_kFWKxSv9a30O3fww7YTiWA"},center:{lat:48.0401,lng:-122.4063},zoom:10,onClick:function(e){c("lat",e.lat),c("lng",e.lng)}},d.length>0?d.map((function(e){return r.a.createElement(le,{key:e.psudeoId,lat:e.latitude,lng:e.longitude,imageUrl:e.imageUrl})})):null,r.a.createElement(ce,{lat:t.lat,lng:t.lng}))),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(s.a,{variant:"h5",color:"secondary"}," Picture of Tree: "),r.a.createElement(U.a,{id:"image",name:"image",type:"file",onChange:function(e){c("image",e.target.files[0])}}),r.a.createElement(D.a,{variant:"static",value:l}),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement(s.a,{className:S.error}," ",a.name," "),r.a.createElement(s.a,{className:S.error}," ",a.description," "),r.a.createElement(s.a,{className:S.error}," ",a.lat," "),r.a.createElement(s.a,{className:S.error}," ",a.image," "),r.a.createElement(s.a,{className:S.confirm}," ",w," "),r.a.createElement("br",null),r.a.createElement(u.a,{type:"submit",color:"secondary",variant:"outlined",disabled:i}," Submit "),r.a.createElement("br",null),r.a.createElement("br",null))})))},me=(a(119),Object(c.a)({buttonStyle:{backgroundColor:"#9ccc65"},clickedButtonStyle:{backgroundColor:"black",color:"white"},title:{display:"inline"}}));var de=function(e){var t=Object(n.useState)(e.page),a=Object(i.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(null),d=Object(i.a)(c,2),p=d[0],g=d[1],E=me();Object(n.useEffect)((function(){var e=h.onAuthStateChanged((function(e){g(e||null)}));return function(){e()}}),[p]);var f={textAlign:"center"};return"home"===l?r.a.createElement("div",null,r.a.createElement("div",{style:f},r.a.createElement("img",{src:ie.a,alt:"",width:"50"}),r.a.createElement(s.a,{className:E.title,gutterBottom:!0,variant:"h2",align:"center",color:"secondary"}," Community Tree "),r.a.createElement("img",{src:ie.a,alt:"",width:"50"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(u.a,{className:E.clickedButtonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("home")}},"home"),p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("upload")}},"upload"):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("profile")}},p.displayName?p.displayName:"profile"):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("feedback")}},"feedback"):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return[h.signOut(),o("home")]}},"logout"):r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("login")}},"login")),p?r.a.createElement(ae,{uid:p.uid,username:p.displayName,loggedIn:!0}):r.a.createElement(ae,{loggedIn:!1})):"upload"===l?r.a.createElement("div",null,r.a.createElement("div",{style:f},r.a.createElement("img",{src:ie.a,alt:"",width:"50"}),r.a.createElement(s.a,{className:E.title,gutterBottom:!0,variant:"h2",align:"center",color:"secondary"}," Community Tree "),r.a.createElement("img",{src:ie.a,alt:"",width:"50"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("home")}},"home"),p?r.a.createElement(u.a,{className:E.clickedButtonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("upload")}},"upload"):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("profile")}},p.displayName):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("feedback")}},"feedback"):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return[h.signOut(),o("home")]}},"logout"):r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("login")}},"login")),r.a.createElement("br",null),r.a.createElement(ue,{uid:p.uid,username:p.displayName})):"profile"===l?r.a.createElement("div",null,r.a.createElement("div",{style:f},r.a.createElement("img",{src:ie.a,alt:"",width:"50"}),r.a.createElement(s.a,{className:E.title,gutterBottom:!0,variant:"h2",align:"center",color:"secondary"}," Community Tree "),r.a.createElement("img",{src:ie.a,alt:"",width:"50"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("home")}},"home"),p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("upload")}},"upload"):null,p?r.a.createElement(u.a,{className:E.clickedButtonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("profile")}},p.displayName):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("feedback")}},"feedback"):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return[h.signOut(),o("home")]}},"logout"):r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("login")}},"login")),r.a.createElement("br",null),r.a.createElement(Y,{uid:p.uid,username:p.displayName,main:!0})):"login"===l?r.a.createElement("div",null,r.a.createElement("div",{style:f},r.a.createElement("img",{src:ie.a,alt:"",width:"50"}),r.a.createElement(s.a,{className:E.title,gutterBottom:!0,variant:"h2",align:"center",color:"secondary"}," Community Tree "),r.a.createElement("img",{src:ie.a,alt:"",width:"50"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("home")}},"home"),p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("upload")}},"upload"):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("profile")}},p.displayName):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("feedback")}},"feedback"):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return[h.signOut(),o("home")]}},"logout"):r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("login")}},"login")),r.a.createElement("br",null),r.a.createElement(m.a,{container:!0,spacing:3},r.a.createElement(m.a,{item:!0,xs:6},r.a.createElement(w,{setPage:o})),r.a.createElement(m.a,{item:!0,xs:6},r.a.createElement(S,{setPage:o})))):"feedback"===l?r.a.createElement("div",null,r.a.createElement("div",{style:f},r.a.createElement("img",{src:ie.a,alt:"",width:"50"}),r.a.createElement(s.a,{className:E.title,gutterBottom:!0,variant:"h2",align:"center",color:"secondary"}," Community Tree "),r.a.createElement("img",{src:ie.a,alt:"",width:"50"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("home")}},"home"),p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("upload")}},"upload"):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("profile")}},p.displayName):null,p?r.a.createElement(u.a,{className:E.clickedButtonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("feedback")}},"feedback"):null,p?r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return[h.signOut(),o("home")]}},"logout"):r.a.createElement(u.a,{className:E.buttonStyle,variant:"outlined",color:"secondary",onClick:function(){return o("login")}},"login")),r.a.createElement("br",null),r.a.createElement(re,{username:p.displayName})):void 0},pe=a(84),ge=Object(pe.a)({palette:{primary:{main:"#555555"},secondary:{main:"#5d4037"}}}),he=a(166);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(he.a,{theme:ge},r.a.createElement(de,{page:"home"})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},25:function(e,t,a){e.exports=a.p+"static/media/tree.aef0521d.png"},83:function(e,t,a){e.exports=a.p+"static/media/profilePic.cd4f33f9.png"},99:function(e,t,a){e.exports=a(120)}},[[99,1,2]]]);
//# sourceMappingURL=main.48cd21a9.chunk.js.map